(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const fe=window,ze=fe.ShadowRoot&&(fe.ShadyCSS===void 0||fe.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ke=Symbol(),ot=new WeakMap;class Ht{constructor(t,n,r){if(this._$cssResult$=!0,r!==Ke)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=n}get styleSheet(){let t=this.o;const n=this.t;if(ze&&t===void 0){const r=n!==void 0&&n.length===1;r&&(t=ot.get(n)),t===void 0&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&ot.set(n,t))}return t}toString(){return this.cssText}}const _e=e=>new Ht(typeof e=="string"?e:e+"",void 0,Ke),Ut=(e,...t)=>{const n=e.length===1?e[0]:t.reduce((r,s,i)=>r+(o=>{if(o._$cssResult$===!0)return o.cssText;if(typeof o=="number")return o;throw Error("Value passed to 'css' function must be a 'css' function result: "+o+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+e[i+1],e[0]);return new Ht(n,e,Ke)},Zn=(e,t)=>{ze?e.adoptedStyleSheets=t.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):t.forEach(n=>{const r=document.createElement("style"),s=fe.litNonce;s!==void 0&&r.setAttribute("nonce",s),r.textContent=n.cssText,e.appendChild(r)})},at=ze?e=>e:e=>e instanceof CSSStyleSheet?(t=>{let n="";for(const r of t.cssRules)n+=r.cssText;return _e(n)})(e):e;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var De;const me=window,ct=me.trustedTypes,Jn=ct?ct.emptyScript:"",lt=me.reactiveElementPolyfillSupport,Me={toAttribute(e,t){switch(t){case Boolean:e=e?Jn:null;break;case Object:case Array:e=e==null?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=e!==null;break;case Number:n=e===null?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch{n=null}}return n}},zt=(e,t)=>t!==e&&(t==t||e==e),Ne={attribute:!0,type:String,converter:Me,reflect:!1,hasChanged:zt};class L extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var n;(n=this.h)!==null&&n!==void 0||(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach((n,r)=>{const s=this._$Ep(r,n);s!==void 0&&(this._$Ev.set(s,r),t.push(s))}),t}static createProperty(t,n=Ne){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(t,n),!n.noAccessor&&!this.prototype.hasOwnProperty(t)){const r=typeof t=="symbol"?Symbol():"__"+t,s=this.getPropertyDescriptor(t,r,n);s!==void 0&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,n,r){return{get(){return this[n]},set(s){const i=this[t];this[n]=s,this.requestUpdate(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||Ne}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const s of r)this.createProperty(s,n[s])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const s of r)n.unshift(at(s))}else t!==void 0&&n.push(at(t));return n}static _$Ep(t,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof t=="string"?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(t=this.constructor.h)===null||t===void 0||t.forEach(n=>n(this))}addController(t){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(t),this.renderRoot!==void 0&&this.isConnected&&((r=t.hostConnected)===null||r===void 0||r.call(t))}removeController(t){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((t,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var t;const n=(t=this.shadowRoot)!==null&&t!==void 0?t:this.attachShadow(this.constructor.shadowRootOptions);return Zn(n,this.constructor.elementStyles),n}connectedCallback(){var t;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(t=this._$ES)===null||t===void 0||t.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(t){}disconnectedCallback(){var t;(t=this._$ES)===null||t===void 0||t.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(t,n,r){this._$AK(t,r)}_$EO(t,n,r=Ne){var s;const i=this.constructor._$Ep(t,r);if(i!==void 0&&r.reflect===!0){const o=(((s=r.converter)===null||s===void 0?void 0:s.toAttribute)!==void 0?r.converter:Me).toAttribute(n,r.type);this._$El=t,o==null?this.removeAttribute(i):this.setAttribute(i,o),this._$El=null}}_$AK(t,n){var r;const s=this.constructor,i=s._$Ev.get(t);if(i!==void 0&&this._$El!==i){const o=s.getPropertyOptions(i),a=typeof o.converter=="function"?{fromAttribute:o.converter}:((r=o.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?o.converter:Me;this._$El=i,this[i]=a.fromAttribute(n,o.type),this._$El=null}}requestUpdate(t,n,r){let s=!0;t!==void 0&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||zt)(this[t],n)?(this._$AL.has(t)||this._$AL.set(t,n),r.reflect===!0&&this._$El!==t&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(t,r))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const t=this.scheduleUpdate();return t!=null&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((s,i)=>this[i]=s),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(t=this._$ES)===null||t===void 0||t.forEach(s=>{var i;return(i=s.hostUpdate)===null||i===void 0?void 0:i.call(s)}),this.update(r)):this._$Ek()}catch(s){throw n=!1,this._$Ek(),s}n&&this._$AE(r)}willUpdate(t){}_$AE(t){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var s;return(s=r.hostUpdated)===null||s===void 0?void 0:s.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}L.finalized=!0,L.elementProperties=new Map,L.elementStyles=[],L.shadowRootOptions={mode:"open"},lt==null||lt({ReactiveElement:L}),((De=me.reactiveElementVersions)!==null&&De!==void 0?De:me.reactiveElementVersions=[]).push("1.4.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var xe;const ge=window,O=ge.trustedTypes,ut=O?O.createPolicy("lit-html",{createHTML:e=>e}):void 0,b=`lit$${(Math.random()+"").slice(9)}$`,Ve="?"+b,qn=`<${Ve}>`,M=document,Z=(e="")=>M.createComment(e),J=e=>e===null||typeof e!="object"&&typeof e!="function",Kt=Array.isArray,Vt=e=>Kt(e)||typeof(e==null?void 0:e[Symbol.iterator])=="function",K=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,dt=/-->/g,pt=/>/g,D=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ht=/'/g,ft=/"/g,Gt=/^(?:script|style|textarea|title)$/i,Yn=e=>(t,...n)=>({_$litType$:e,strings:t,values:n}),Qn=Yn(1),E=Symbol.for("lit-noChange"),m=Symbol.for("lit-nothing"),vt=new WeakMap,Xn=(e,t,n)=>{var r,s;const i=(r=n==null?void 0:n.renderBefore)!==null&&r!==void 0?r:t;let o=i._$litPart$;if(o===void 0){const a=(s=n==null?void 0:n.renderBefore)!==null&&s!==void 0?s:null;i._$litPart$=o=new j(t.insertBefore(Z(),a),a,void 0,n!=null?n:{})}return o._$AI(e),o},k=M.createTreeWalker(M,129,null,!1),Ft=(e,t)=>{const n=e.length-1,r=[];let s,i=t===2?"<svg>":"",o=K;for(let c=0;c<n;c++){const l=e[c];let p,d,u=-1,h=0;for(;h<l.length&&(o.lastIndex=h,d=o.exec(l),d!==null);)h=o.lastIndex,o===K?d[1]==="!--"?o=dt:d[1]!==void 0?o=pt:d[2]!==void 0?(Gt.test(d[2])&&(s=RegExp("</"+d[2],"g")),o=D):d[3]!==void 0&&(o=D):o===D?d[0]===">"?(o=s!=null?s:K,u=-1):d[1]===void 0?u=-2:(u=o.lastIndex-d[2].length,p=d[1],o=d[3]===void 0?D:d[3]==='"'?ft:ht):o===ft||o===ht?o=D:o===dt||o===pt?o=K:(o=D,s=void 0);const f=o===D&&e[c+1].startsWith("/>")?" ":"";i+=o===K?l+qn:u>=0?(r.push(p),l.slice(0,u)+"$lit$"+l.slice(u)+b+f):l+b+(u===-2?(r.push(void 0),c):f)}const a=i+(e[n]||"<?>")+(t===2?"</svg>":"");if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return[ut!==void 0?ut.createHTML(a):a,r]};class q{constructor({strings:t,_$litType$:n},r){let s;this.parts=[];let i=0,o=0;const a=t.length-1,c=this.parts,[l,p]=Ft(t,n);if(this.el=q.createElement(l,r),k.currentNode=this.el.content,n===2){const d=this.el.content,u=d.firstChild;u.remove(),d.append(...u.childNodes)}for(;(s=k.nextNode())!==null&&c.length<a;){if(s.nodeType===1){if(s.hasAttributes()){const d=[];for(const u of s.getAttributeNames())if(u.endsWith("$lit$")||u.startsWith(b)){const h=p[o++];if(d.push(u),h!==void 0){const f=s.getAttribute(h.toLowerCase()+"$lit$").split(b),v=/([.?@])?(.*)/.exec(h);c.push({type:1,index:i,name:v[2],strings:f,ctor:v[1]==="."?Zt:v[1]==="?"?Jt:v[1]==="@"?qt:ee})}else c.push({type:6,index:i})}for(const u of d)s.removeAttribute(u)}if(Gt.test(s.tagName)){const d=s.textContent.split(b),u=d.length-1;if(u>0){s.textContent=O?O.emptyScript:"";for(let h=0;h<u;h++)s.append(d[h],Z()),k.nextNode(),c.push({type:2,index:++i});s.append(d[u],Z())}}}else if(s.nodeType===8)if(s.data===Ve)c.push({type:2,index:i});else{let d=-1;for(;(d=s.data.indexOf(b,d+1))!==-1;)c.push({type:7,index:i}),d+=b.length-1}i++}}static createElement(t,n){const r=M.createElement("template");return r.innerHTML=t,r}}function x(e,t,n=e,r){var s,i,o,a;if(t===E)return t;let c=r!==void 0?(s=n._$Cl)===null||s===void 0?void 0:s[r]:n._$Cu;const l=J(t)?void 0:t._$litDirective$;return(c==null?void 0:c.constructor)!==l&&((i=c==null?void 0:c._$AO)===null||i===void 0||i.call(c,!1),l===void 0?c=void 0:(c=new l(e),c._$AT(e,n,r)),r!==void 0?((o=(a=n)._$Cl)!==null&&o!==void 0?o:a._$Cl=[])[r]=c:n._$Cu=c),c!==void 0&&(t=x(e,c._$AS(e,t.values),c,r)),t}class Wt{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n;const{el:{content:r},parts:s}=this._$AD,i=((n=t==null?void 0:t.creationScope)!==null&&n!==void 0?n:M).importNode(r,!0);k.currentNode=i;let o=k.nextNode(),a=0,c=0,l=s[0];for(;l!==void 0;){if(a===l.index){let p;l.type===2?p=new j(o,o.nextSibling,this,t):l.type===1?p=new l.ctor(o,l.name,l.strings,this,t):l.type===6&&(p=new Yt(o,this,t)),this.v.push(p),l=s[++c]}a!==(l==null?void 0:l.index)&&(o=k.nextNode(),a++)}return i}m(t){let n=0;for(const r of this.v)r!==void 0&&(r.strings!==void 0?(r._$AI(t,r,n),n+=r.strings.length-2):r._$AI(t[n])),n++}}class j{constructor(t,n,r,s){var i;this.type=2,this._$AH=m,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=r,this.options=s,this._$C_=(i=s==null?void 0:s.isConnected)===null||i===void 0||i}get _$AU(){var t,n;return(n=(t=this._$AM)===null||t===void 0?void 0:t._$AU)!==null&&n!==void 0?n:this._$C_}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&t.nodeType===11&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=x(this,t,n),J(t)?t===m||t==null||t===""?(this._$AH!==m&&this._$AR(),this._$AH=m):t!==this._$AH&&t!==E&&this.$(t):t._$litType$!==void 0?this.T(t):t.nodeType!==void 0?this.k(t):Vt(t)?this.O(t):this.$(t)}S(t,n=this._$AB){return this._$AA.parentNode.insertBefore(t,n)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}$(t){this._$AH!==m&&J(this._$AH)?this._$AA.nextSibling.data=t:this.k(M.createTextNode(t)),this._$AH=t}T(t){var n;const{values:r,_$litType$:s}=t,i=typeof s=="number"?this._$AC(t):(s.el===void 0&&(s.el=q.createElement(s.h,this.options)),s);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===i)this._$AH.m(r);else{const o=new Wt(i,this),a=o.p(this.options);o.m(r),this.k(a),this._$AH=o}}_$AC(t){let n=vt.get(t.strings);return n===void 0&&vt.set(t.strings,n=new q(t)),n}O(t){Kt(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,s=0;for(const i of t)s===n.length?n.push(r=new j(this.S(Z()),this.S(Z()),this,this.options)):r=n[s],r._$AI(i),s++;s<n.length&&(this._$AR(r&&r._$AB.nextSibling,s),n.length=s)}_$AR(t=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);t&&t!==this._$AB;){const s=t.nextSibling;t.remove(),t=s}}setConnected(t){var n;this._$AM===void 0&&(this._$C_=t,(n=this._$AP)===null||n===void 0||n.call(this,t))}}class ee{constructor(t,n,r,s,i){this.type=1,this._$AH=m,this._$AN=void 0,this.element=t,this.name=n,this._$AM=s,this.options=i,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=m}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,r,s){const i=this.strings;let o=!1;if(i===void 0)t=x(this,t,n,0),o=!J(t)||t!==this._$AH&&t!==E,o&&(this._$AH=t);else{const a=t;let c,l;for(t=i[0],c=0;c<i.length-1;c++)l=x(this,a[r+c],n,c),l===E&&(l=this._$AH[c]),o||(o=!J(l)||l!==this._$AH[c]),l===m?t=m:t!==m&&(t+=(l!=null?l:"")+i[c+1]),this._$AH[c]=l}o&&!s&&this.P(t)}P(t){t===m?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t!=null?t:"")}}class Zt extends ee{constructor(){super(...arguments),this.type=3}P(t){this.element[this.name]=t===m?void 0:t}}const er=O?O.emptyScript:"";class Jt extends ee{constructor(){super(...arguments),this.type=4}P(t){t&&t!==m?this.element.setAttribute(this.name,er):this.element.removeAttribute(this.name)}}class qt extends ee{constructor(t,n,r,s,i){super(t,n,r,s,i),this.type=5}_$AI(t,n=this){var r;if((t=(r=x(this,t,n,0))!==null&&r!==void 0?r:m)===E)return;const s=this._$AH,i=t===m&&s!==m||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,o=t!==m&&(s===m||i);i&&this.element.removeEventListener(this.name,this,s),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,t):this._$AH.handleEvent(t)}}class Yt{constructor(t,n,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){x(this,t)}}const tr={A:"$lit$",M:b,C:Ve,L:1,R:Ft,D:Wt,V:Vt,I:x,H:j,N:ee,U:Jt,B:qt,F:Zt,W:Yt},mt=ge.litHtmlPolyfillSupport;mt==null||mt(q,j),((xe=ge.litHtmlVersions)!==null&&xe!==void 0?xe:ge.litHtmlVersions=[]).push("2.3.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Pe,Ie;class F extends L{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,n;const r=super.createRenderRoot();return(t=(n=this.renderOptions).renderBefore)!==null&&t!==void 0||(n.renderBefore=r.firstChild),r}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=Xn(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),(t=this._$Do)===null||t===void 0||t.setConnected(!1)}render(){return E}}F.finalized=!0,F._$litElement$=!0,(Pe=globalThis.litElementHydrateSupport)===null||Pe===void 0||Pe.call(globalThis,{LitElement:F});const gt=globalThis.litElementPolyfillSupport;gt==null||gt({LitElement:F});((Ie=globalThis.litElementVersions)!==null&&Ie!==void 0?Ie:globalThis.litElementVersions=[]).push("3.2.2");var nr=globalThis&&globalThis.__decorate||function(e,t,n,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,n,i):o(t,n))||i);return s>3&&i&&Object.defineProperty(t,n,i),i};function rr(){return e=>{}}let Y=class extends F{};Y=nr([rr()],Y);const sr=["january","february","march","april","may","june","july","august","september","october","november","december"];sr.map(e=>e.slice(0,3));function ye(e){return Object.keys(e)}function ir(e,t){return e&&t.every(n=>Object.prototype.hasOwnProperty.call(e,n))}function Ee(e,t){let n=!1;const r=ye(e).reduce((s,i)=>{const o=t(i,e[i]);return o instanceof Promise&&(n=!0),{...s,[i]:o}},{});return n?new Promise(async(s,i)=>{try{await Promise.all(ye(r).map(async o=>{const a=await r[o];r[o]=a})),s(r)}catch(o){i(o)}}):r}const Qt={capitalizeFirstLetter:!1};function or(e){var t;return e.length?((t=e[0])!==null&&t!==void 0?t:"").toUpperCase()+e.slice(1):""}function ar(e,t=Qt){return t.capitalizeFirstLetter?or(e):e}function cr(e,t=Qt){const n=e.toLowerCase();if(!n.length)return"";const r=n.replace(/^-+/,"").replace(/-{2,}/g,"-").replace(/-(?:.|$)/g,s=>{const i=s[1];return i?i.toUpperCase():""});return ar(r,t)}function yt(e){return e!==e.toUpperCase()}function lr(e){return e.split("").reduce((n,r,s,i)=>{var o,a;const c=s>0&&(o=i[s-1])!==null&&o!==void 0?o:"",l=s<i.length&&(a=i[s+1])!==null&&a!==void 0?a:"",p=yt(c)||yt(l);return r===r.toLowerCase()||s===0||!p?n+=r:n+=`-${r.toLowerCase()}`,n},"").toLowerCase()}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const ur=(e,t)=>t.kind==="method"&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(n){n.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){typeof t.initializer=="function"&&(this[t.key]=t.initializer.call(this))},finisher(n){n.createProperty(t.key,e)}};function Xt(e){return(t,n)=>n!==void 0?((r,s,i)=>{s.constructor.createProperty(i,r)})(e,t,n):ur(e,t)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Le;((Le=window.HTMLSlotElement)===null||Le===void 0?void 0:Le.prototype.assignedElements)!=null;const je=Symbol("this-is-an-element-vir-declarative-element");function en(e,t){return`${e}-${lr(t)}`}function dr(e,t){return t?Ee(t,n=>_e(`--${en(e,String(n))}`)):{}}function pr(e,t){return e?Ee(e,(n,r)=>{const s=t[n];return _e(`var(${s}, ${r})`)}):{}}const Ge=Symbol("key for ignoring inputs not having been set yet"),hr={[Ge]:!0};class fr extends CustomEvent{constructor(t,n){super(typeof t=="string"?t:t.type,{detail:n,bubbles:!0,composed:!0}),this._type=""}get type(){return this._type}}function Ce(){return e=>{var t;return t=class extends fr{constructor(n){super(e,n),this._type=e}},t.type=e,t}}function tn(){return Ce()}function vr(e){return e?Object.keys(e).filter(t=>{if(typeof t!="string")throw new Error(`Expected event key of type string but got type "${typeof t}" for key ${String(t)}`);if(t==="")throw new Error("Got empty string for events key.");return!0}).reduce((t,n)=>{const r=Ce()(n);return t[n]=r,t},{}):{}}function wt(e,t,n){if(typeof e!="string"&&typeof e!="number"&&typeof e!="symbol")throw new Error(`Property name must be a string, got type "${typeof e}" from: "${String(e)}" for ${n.toLowerCase()}`);if(!(e in t))throw new Error(`Property "${String(e)}" does not exist on ${n.toLowerCase()}.`)}function $t(e,t){const n=e;return new Proxy({},{get:(s,i)=>(t&&wt(i,e,e.tagName),n[i]),set:(s,i,o)=>(t&&wt(i,e,e.tagName),n[i]=o,!0)})}function nn(e){const t=e.getRootNode();if(!(t instanceof ShadowRoot))return!1;const n=t.host;return n instanceof Y?!0:nn(n)}function mr(e,t){return t?Ee(t,n=>en(e,String(n))):{}}function gr(e,t){return{dispatch:r=>e.dispatchEvent(r),genericDispatch:r=>e.dispatchEvent(r),updateState:r=>{ye(r).forEach(s=>{e.instanceState[s]=r[s]})},inputs:e.instanceInputs,host:e,state:e.instanceState,events:t}}function yr({hostClassNames:e,cssVarNames:t,cssVarValues:n}){return{hostClass:Ee(e,(r,s)=>_e(`:host(.${s})`)),cssVarName:t,cssVarValue:n}}function wr({host:e,hostClassesInit:t,hostClassNames:n,state:r,inputs:s}){!t||ye(t).forEach(i=>{const o=t[i],a=n[i];typeof o=="function"&&(o({state:r,inputs:s})?e.classList.add(a):e.classList.remove(a))})}function rn(e){var t;const n=vr(e.events),r=mr(e.tagName,e.hostClasses),s=dr(e.tagName,e.cssVars),i=pr(e.cssVars,s),o={...hr,...e.options},a=typeof e.styles=="function"?e.styles(yr({hostClassNames:r,cssVarNames:s,cssVarValues:i})):e.styles||Ut``,c=e.renderCallback,l=(t=class extends Y{constructor(){super(),this.initCalled=!1,this.haveInputsBeenSet=!1,this.creator={},this.instanceInputs=$t(this,!1),this.instanceState=$t(this,!0);const p=e.stateInit||{};Object.keys(p).forEach(d=>{Xt()(this,d),this[d]=p[d]})}createRenderParams(){return gr(this,n)}get instanceType(){throw new Error(`"instanceType" was called on ${e.tagName} as a value but it is only for types.`)}static get inputsType(){throw new Error(`"inputsType" was called on ${e.tagName} as a value but it is only for types.`)}markInputsAsHavingBeenSet(){this.haveInputsBeenSet||(this.haveInputsBeenSet=!0)}render(){nn(this)&&!this.haveInputsBeenSet&&!o[Ge]&&console.warn(this,`${e.tagName} got rendered before its input object was set. This was most likely caused by forgetting to use the "assign" directive on it.`);const p=this.createRenderParams();!this.initCalled&&e.initCallback&&(this.initCalled=!0,e.initCallback(p));const d=e.renderCallback(p);return wr({host:p.host,hostClassesInit:e.hostClasses,hostClassNames:r,state:p.state,inputs:p.inputs}),d}},t.tagName=e.tagName,t.styles=a,t.isStrictInstance=()=>!1,t.events=n,t.renderCallback=c,t.hostClasses=r,t.cssVarNames=s,t.stateInit=e.stateInit,t.cssVarValues=s,t);return Object.defineProperties(l,{[je]:{value:!0,writable:!1},name:{value:cr(e.tagName,{capitalizeFirstLetter:!0}),writable:!0},creator:{value:l,writable:!1},isStrictInstance:{value:p=>p instanceof l,writable:!1}}),window.customElements.define(e.tagName,l),l}function Fe(){return e=>rn({...e,options:{[Ge]:!1},...e.options})}/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{H:$r}=tr,bt=()=>document.createComment(""),V=(e,t,n)=>{var r;const s=e._$AA.parentNode,i=t===void 0?e._$AB:t._$AA;if(n===void 0){const o=s.insertBefore(bt(),i),a=s.insertBefore(bt(),i);n=new $r(o,a,e,e.options)}else{const o=n._$AB.nextSibling,a=n._$AM,c=a!==e;if(c){let l;(r=n._$AQ)===null||r===void 0||r.call(n,e),n._$AM=e,n._$AP!==void 0&&(l=e._$AU)!==a._$AU&&n._$AP(l)}if(o!==i||c){let l=n._$AA;for(;l!==o;){const p=l.nextSibling;s.insertBefore(l,i),l=p}}}return n},N=(e,t,n=e)=>(e._$AI(t,n),e),br={},_r=(e,t=br)=>e._$AH=t,Er=e=>e._$AH,ke=e=>{var t;(t=e._$AP)===null||t===void 0||t.call(e,!1,!0);let n=e._$AA;const r=e._$AB.nextSibling;for(;n!==r;){const s=n.nextSibling;n.remove(),n=s}};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const sn={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},We=e=>(...t)=>({_$litDirective$:e,values:t});class Ze{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,r){this._$Ct=t,this._$AM=n,this._$Ci=r}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}function Cr(e,t){return on(e,t,Y)}function on(e,t,n){Ar(e,t);const r=e.element;if(!(r instanceof n))throw new Error(`${t} attached to non ${n.name} element.`);return r}function Ar(e,t){if(e.type!==sn.ELEMENT)throw new Error(`${t} directive can only be attached directly to an element.`);if(!e.element)throw new Error(`${t} directive found no element.`)}function _t(e,t){return Sr(e,t)}const Sr=We(class extends Ze{constructor(e){super(e),this.element=Cr(e,"assign")}render(e,t){return Tr(e,this.element,t),E}});function Tr(e,t,n){if(t.tagName.toLowerCase()!==e.tagName.toLowerCase())throw console.error(t,e),new Error(`Assignment mismatch. Assignment was made for ${t.tagName.toLowerCase()} but it's attached to ${e.tagName.toLowerCase()}`);Object.keys(n).forEach(r=>{t.constructor.elementProperties.has(r)||Xt()(t,r),t.instanceInputs[r]=n[r]}),t.markInputsAsHavingBeenSet()}function R(e,t){return Dr(e,t)}const Dr=We(class extends Ze{constructor(e){super(e),this.element=on(e,"listen",HTMLElement)}resetListener(e){this.lastListenerMetaData&&this.element.removeEventListener(this.lastListenerMetaData.eventType,this.lastListenerMetaData.listener),this.element.addEventListener(e.eventType,e.listener),this.lastListenerMetaData=e}createListenerMetaData(e,t){return{eventType:e,callback:t,listener:n=>{var r;return(r=this.lastListenerMetaData)===null||r===void 0?void 0:r.callback(n)}}}render(e,t){const n=typeof e=="string"?e:e.type;if(typeof n!="string")throw new Error(`Cannot listen to an event with a name that is not a string. Given event name: "${n}"`);return this.lastListenerMetaData&&this.lastListenerMetaData.eventType===n?this.lastListenerMetaData.callback=t:this.resetListener(this.createListenerMetaData(n,t)),E}});function Nr(e,t){return e.filter((n,r)=>!t.includes(r))}function an(e){return e.filter(t=>ir(t,["tagName",je])&&!!t.tagName&&!!t[je])}const cn=new WeakMap;function xr(e,t){var n;const r=an(t);return(n=ln(cn,[e,...r]).value)===null||n===void 0?void 0:n.template}function Pr(e,t,n){const r=an(t);return dn(cn,[e,...r],n)}function ln(e,t,n=0){const{currentTemplateAndNested:r,reason:s}=un(e,t,n);return r?n===t.length-1?{value:r,reason:"reached end of keys array"}:r.nested?ln(r.nested,t,n+1):{value:void 0,reason:`map at key index ${n} did not have nested maps`}:{value:r,reason:s}}function un(e,t,n){const r=t[n];if(r==null)return{currentKey:void 0,currentTemplateAndNested:void 0,reason:`key at index ${n} not found`};if(!e.has(r))return{currentKey:r,currentTemplateAndNested:void 0,reason:`key at index ${n} was not in the map`};const s=e.get(r);return s==null?{currentKey:r,currentTemplateAndNested:void 0,reason:`value at key at index ${n} was undefined`}:{currentKey:r,currentTemplateAndNested:s,reason:"key and value exists"}}function dn(e,t,n,r=0){var s;const{currentTemplateAndNested:i,currentKey:o,reason:a}=un(e,t,r);if(!o)return{result:!1,reason:a};const c=i!=null?i:{nested:void 0,template:void 0};if(i||e.set(o,c),r===t.length-1)return c.template=n,{result:!0,reason:"set value at end of keys array"};const l=(s=c.nested)!==null&&s!==void 0?s:new WeakMap;return c.nested||(c.nested=l),dn(l,t,n,r+1)}function pn(e,t,n){return{name:e,check:t,transform:n}}const Ir=new WeakMap;function hn(e,t,n){const r=xr(e,t),s=r!=null?r:n();if(!r){const o=Pr(e,t,s);if(o.result)Ir.set(e,s);else throw new Error(`Failed to set template transform: ${o.reason}`)}const i=Nr(t,s.valueIndexDeletions);return{strings:s.templateStrings,values:i}}function fn(e,t,n,r){const s=[],i=[],o=[];return e.forEach((c,l)=>{var p;const d=s.length-1,u=s[d],h=l-1,f=t[h];let v;r&&r(c),typeof u=="string"&&(v=(p=n.find(z=>z.check(u,c,f)))===null||p===void 0?void 0:p.transform,v&&(s[d]=u+v(f)+c,o.push(h))),v||s.push(c);const g=e.raw[l];v?i[d]=i[d]+v(f)+g:i.push(g)}),{templateStrings:Object.assign([],s,{raw:i}),valueIndexDeletions:o}}function vn(e){return typeof e=="function"&&e.hasOwnProperty("tagName")&&typeof e.tagName=="string"&&e.tagName.includes("-")}const Lr=[pn("tag name css selector interpolation",(e,t,n)=>vn(n),e=>e.tagName)];function kr(e,t){return fn(e,t,Lr)}function te(e,...t){const n=hn(e,t,()=>kr(e,t));return Ut(n.strings,...n.values)}const Rr=[pn("tag name interpolation",(e,t,n)=>{const r=e.trim().endsWith("<")&&!!t.match(/^[\s\n>]/)||(e==null?void 0:e.trim().endsWith("</"))&&t.trim().startsWith(">"),s=vn(n);if(r&&!s)throw console.error({lastNewString:e,currentLitString:t,currentValue:n}),new Error(`Got interpolated tag name but it wasn't of type VirElement: ${n.prototype.constructor.name}`);return r&&s},e=>e.tagName)];function Or(e){}function Mr(e){return fn(e.strings,e.values,Rr,Or)}function $(e,...t){const n=Qn(e,...t),r=hn(e,t,()=>Mr(n));return{...n,strings:r.strings,values:r.values}}var ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mn(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var w={},gn={};Object.defineProperty(gn,"__esModule",{value:!0});var C={};const jr=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"],yn=new RegExp(jr.join("|"),"g");function Br(e,t){return e.filter((n,r)=>!t.includes(r))}function Hr(e){return e.reduce((n,r)=>n.concat(r),[])}function Ur(e){return e.map(t=>t.trim()).filter(t=>t!=="")}async function zr(e,t){await wn(e,t)}async function wn(e,t){return await e.reduce(async(r,s,i,o)=>{const a=await r,c=await t(s,i,o);return a.push(c),a},Promise.resolve([]))}const Je=["january","february","march","april","may","june","july","august","september","october","november","december"],$n=Je.map(e=>e.slice(0,3));class we extends Error{constructor(){super(...arguments),this.name="InvalidDateError"}}function Kr(e,t=""){const[n,r,s=""]=e.split("/");if(!n||!r)throw new Error(`Unable to extract month or day from "${e}"`);const i=s.length<4?`${t}${s.padStart(2,"0")}`:s;return qe(`${i.padStart(4,"0")}-${n.padStart(2,"0")}-${r.padStart(2,"0")}`)}function bn(e,t=!1){const[n,r,s]=e.replace(",","").split(" ");if(!n||!r||!s)throw new we(`Invalid ${bn.name} input: ${e}`);const i=Je.indexOf(n.toLowerCase()),o=$n.indexOf(n.toLowerCase());let a=i===-1?o:i;if(a===-1)if(t)a=4;else throw new we(`Month name ${n} was not found.`);return qe(`${s.padStart(4,"0")}-${String(a+1).padStart(2,"0")}-${r.padStart(2,"0")}`)}function qe(e){const t=new Date(e+"T00:00:00.000Z");if(isNaN(Number(t)))throw new we(`Invalid utc date formed from input "${e}"`);return t}function _n(e){return!!e}function Vr(e){if(!e||e.length===0)return;const t=e[0];return e.length===1&&t?t:new Error(e.map(n=>Ye(n).trim()).join(`
`))}function Gr(e){return e?e.map(Ye).filter(_n).join(`
`):""}function Ye(e){return e?e instanceof Error?e.message:String(e):""}function Fr({value:e,min:t,max:n}){return Math.max(Math.min(e,n),t)}const Wr=["","k","M","B","T","P","E","Z","Y"];function En(e,t=0,n=""){var r,s;if(e.includes("e+"))throw new Error(`Number is too large, it cannot be truncated: ${e}`);if(e.includes("e-"))throw new Error(`Number is too small, it cannot be truncated: ${e}`);const i=e.split(".");n=(r=i[1])!==null&&r!==void 0?r:n;const o=(s=i[0])!==null&&s!==void 0?s:"";return o.length>3?(n=o.slice(-3),En(o.slice(0,-3),t+1,n)):{value:o,decimalValues:n,recursionDepth:t}}const Zr=4;function Jr(e,t=Wr){try{const n=typeof e=="number"?e:Number(e);if(isNaN(n))throw new Error(`${e} could not be converted into a number.`);const r=En(String(n)),s=t[r.recursionDepth];if(s===void 0)throw new Error(`Number is too large, could not truncate: ${n}`);const i=Zr-(r.value.length-1)-s.length,o=r.decimalValues.replace(/0+$/,"").slice(0,i),a=o.length?`.${o}`:"";return`${r.value}${a}${s}`}catch(n){return console.error(n),String(e)}}function Cn(e){return Q(e).filter(t=>isNaN(Number(t)))}function Qe(e){return Cn(e).map(n=>e[n])}function Xe(e,t){return Qe(t).includes(e)}function qr(e,t,n=!1){return n?e.reduce((r,s)=>{const i=Qe(t).find(o=>String(o).toUpperCase()===String(s).toUpperCase());return i?r.concat(i):r},[]):e.filter(r=>Xe(r,t))}function Q(e){return Reflect.ownKeys(e)}function $e(e){return Q(e).map(t=>e[t])}function Ae(e,t){return e&&Reflect.has(e,t)}function An(e,t){return e&&t.every(n=>Ae(e,n))}function et(e){return!!e&&typeof e=="object"}function Be(e){return Object.entries(e).sort((t,n)=>t[0].localeCompare(n[0]))}function Yr(e,t){try{const n=Be(e),r=Be(t);return JSON.stringify(n)===JSON.stringify(r)}catch(n){throw console.error("Failed to compare objects using JSON.stringify"),n}}function Sn(e,t){let n=!1;const r=Q(e).reduce((s,i)=>{const o=t(i,e[i]);return o instanceof Promise&&(n=!0),{...s,[i]:o}},{});return n?new Promise(async(s,i)=>{try{await Promise.all(Q(r).map(async o=>{const a=await r[o];r[o]=a})),s(r)}catch(o){i(o)}}):r}function Qr(e){try{return JSON.parse(JSON.stringify(e))}catch(t){throw console.error("Failed to JSON copy for",e),t}}function Xr(e){const t=tt();return e===1/0||e<0||setTimeout(()=>{t.resolve()},e),t.promise}function es(e){return typeof(e==null?void 0:e.then)=="function"}class Tn extends Error{constructor(t,n=`Promised timed out after ${t} ms.`){super(n),this.durationMs=t,this.message=n,this.name="PromiseTimeoutError"}}function ts(e,t){return new Promise(async(n,r)=>{const s=setTimeout(()=>{r(new Tn(e))},e);try{const i=await t;n(i)}catch(i){r(i)}finally{clearTimeout(s)}})}function tt(){let e,t;const n=new Promise((r,s)=>{e=r,t=s});if(!e||!t)throw new Error(`Reject and resolve callbacks were not set by the promise constructor for ${tt.name}.`);return{promise:n,resolve:e,reject:t}}function nt(e){const t=new Set(Array.from(e.toLowerCase()));return Array.from(t).join("")}function ns(e,t){return new RegExp(e.source,nt([e.flags,t].join("")))}function rs(e,t){const n=e.match(t);return n!=null?n:[]}function ss(e,t="and"){if(e.length<2)return e.join("");const n=e.length>2?", ":" ";return`${e.slice(0,-1).join(n)}${n}${t} ${e[e.length-1]}`}function Dn(e){return e.replace(yn,"")}const is=Dn;function os(e){return e.replace(/,/g,"")}function as(e){return e.replace(/\n/g," ").trim().replace(/\s{2,}/g," ")}function cs(e,t,n){const r=Ln(e,t,n,!0),s=In(t,n);return e.split(s).reduce((a,c,l)=>{const p=r[l],d=a.concat(c);if(p){const u=e.slice(p.index,p.index+p.length);return d.concat(u)}else return d},[])}const Nn={capitalizeFirstLetter:!1};function xn(e){var t;return e.length?((t=e[0])!==null&&t!==void 0?t:"").toUpperCase()+e.slice(1):""}function ls(e,t=Nn){return t.capitalizeFirstLetter?xn(e):e}function us(e,t=Nn){const n=e.toLowerCase();if(!n.length)return"";const r=n.replace(/^-+/,"").replace(/-{2,}/g,"-").replace(/-(?:.|$)/g,s=>{const i=s[1];return i?i.toUpperCase():""});return ls(r,t)}function Et(e){return e!==e.toUpperCase()}function ds(e){return e.split("").reduce((n,r,s,i)=>{var o,a;const c=s>0&&(o=i[s-1])!==null&&o!==void 0?o:"",l=s<i.length&&(a=i[s+1])!==null&&a!==void 0?a:"",p=Et(c)||Et(l);return r===r.toLowerCase()||s===0||!p?n+=r:n+=`-${r.toLowerCase()}`,n},"").toLowerCase()}function ps(e,t,n,r=n.length){const s=e.substring(0,t),i=e.substring(t+r);return`${s}${n}${i}`}function Pn(e){return e.replace(/[\^$\\.*+?()[\]{}|]/g,"\\$&")}function In(e,t){const n=`g${!t&&typeof e=="string"?"i":""}`;return e instanceof RegExp?new RegExp(e.source,nt(`${e.flags}${n}`)):new RegExp(Pn(e),n)}function Ln(e,t,n,r=!1){const s=In(t,n),i=[],o=[];return e.replace(s,(...a)=>{const c=a[a.length-2];if(typeof c!="number")throw new Error(`Match index "${c}" is not a number. Searching for "${t}" in "${e}".`);const l=a[0];if(typeof l!="string")throw new Error(`regExpMatch should've been a string but was ${typeof l}!`);o.push({index:c,length:l.length}),i.push(c);const p=a[0];if(typeof p!="string")throw new Error(`Original match when searching for "${t}" in "${e}" at index ${c} is not a string.`);return p}),r?o:i}function be(e=16){const t=Math.ceil(e/2);if(typeof window>"u")throw new Error(`Window not defined for ${be.name} function. If using this in a Node.js context, import ${be.name} from 'augment-vir/dist/node'`);{const n=new Uint8Array(t);return window.crypto.getRandomValues(n),Array.from(n).map(r=>r.toString(16).padStart(2,"0")).join("").substring(0,e)}}function kn(){return e=>e}const hs=Object.freeze(Object.defineProperty({__proto__:null,ansiRegex:yn,filterOutIndexes:Br,flatten2dArray:Hr,trimArrayStrings:Ur,awaitedForEach:zr,awaitedBlockingMap:wn,englishFullMonthNames:Je,englishShortMonthNames:$n,InvalidDateError:we,createDateFromSlashFormat:Kr,createDateFromNamedCommaFormat:bn,createDateFromUtcIsoFormat:qe,combineErrors:Vr,combineErrorMessages:Gr,extractErrorMessage:Ye,isTruthy:_n,clamp:Fr,truncateNumber:Jr,getEnumTypedKeys:Cn,getEnumTypedValues:Qe,isEnumValue:Xe,filterToEnumValues:qr,getObjectTypedKeys:Q,getObjectTypedValues:$e,typedHasOwnProperty:Ae,typedHasOwnProperties:An,isObject:et,getEntriesSortedByKey:Be,areJsonEqual:Yr,mapObject:Sn,copyThroughJson:Qr,wait:Xr,isPromiseLike:es,PromiseTimeoutError:Tn,wrapPromiseInTimeout:ts,createDeferredPromiseWrapper:tt,deDupeRegExFlags:nt,addRegExpFlags:ns,safeMatch:rs,joinWithFinalConjunction:ss,removeAnsiEscapeCodes:Dn,removeColor:is,removeCommasFromNumberString:os,collapseWhiteSpace:as,splitIncludeSplit:cs,capitalizeFirstLetter:xn,kebabCaseToCamelCase:us,camelCaseToKebabCase:ds,replaceStringAtIndex:ps,escapeStringForRegExp:Pn,getAllIndexesOf:Ln,randomString:be,wrapNarrowTypeWithTypeCheck:kn},Symbol.toStringTag,{value:"Module"})),B=mn(hs);var A={};Object.defineProperty(A,"__esModule",{value:!0});A.mouseDeviceKeySymbol=A.keyboardDeviceKeySymbol=void 0;A.keyboardDeviceKeySymbol=Symbol("keyboard device id");A.mouseDeviceKeySymbol=Symbol("mouse device id");var S={},H={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InputDeviceType=void 0,function(t){t.Keyboard="keyboard",t.Mouse="mouse",t.Gamepad="gamepad"}(e.InputDeviceType||(e.InputDeviceType={}))})(H);var rt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GamepadInputType=void 0,function(t){t.Button="button",t.Axe="axe"}(e.GamepadInputType||(e.GamepadInputType={}))})(rt);var P={};Object.defineProperty(P,"__esModule",{value:!0});P.createAxeName=P.createButtonName=void 0;function fs(e){return`button-${e}`}P.createButtonName=fs;function vs(e){return`axe-${e}`}P.createAxeName=vs;var ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.getNavigator=void 0;function ms(){return window.navigator}ne.getNavigator=ms;var I={};Object.defineProperty(I,"__esModule",{value:!0});I.serializeGamepad=I.serializeGamepadButton=void 0;function Rn(e){return{pressed:e.pressed,touched:e.touched,value:e.value}}I.serializeGamepadButton=Rn;function gs(e){return{axes:e.axes,buttons:e.buttons.map(Rn),connected:e.connected,id:e.id,index:e.index,mapping:e.mapping,serialized:!0,timestamp:e.timestamp}}I.serializeGamepad=gs;Object.defineProperty(S,"__esModule",{value:!0});S.gamepadToCurrentInputs=S.readCurrentGamepads=void 0;const ys=B,ws=H,Ct=rt,At=P,$s=ne,bs=I;function _s(e){const t=(0,$s.getNavigator)();return Array.from((0,ys.typedHasOwnProperty)(t,"webkitGetGamepads")?t.webkitGetGamepads():t.getGamepads()).filter(s=>!!s).map(s=>(0,bs.serializeGamepad)(s)).reduce((s,i)=>{const o=Cs(i,e);return s[i.index]={...i,...o},s},{})}S.readCurrentGamepads=_s;function Es(e){const t={},n={deviceKey:e.index,deviceName:e.id,deviceType:ws.InputDeviceType.Gamepad};return e.buttons.forEach((r,s)=>{if(r.value){const i=(0,At.createButtonName)(s);t[i]={...n,details:{inputType:Ct.GamepadInputType.Button,buttonDetails:r},inputName:i,inputValue:r.value}}}),e.axes.forEach((r,s)=>{if(r){const i=(0,At.createAxeName)(s);t[i]={...n,details:{inputType:Ct.GamepadInputType.Axe},inputName:i,inputValue:r}}}),t}S.gamepadToCurrentInputs=Es;const St=.01;function Cs(e,t){const n=t[e.id],r=e.axes.map((i,o)=>{var a;const c=(a=n==null?void 0:n.axesDeadZones[o])!==null&&a!==void 0?a:St;return Math.abs(i)<c?0:i}),s=e.buttons.map((i,o)=>{var a;const c=(a=n==null?void 0:n.axesDeadZones[o])!==null&&a!==void 0?a:St,l=Math.abs(i.value)<c?0:i.value;return{...i,value:l}});return{axes:r,buttons:s}}Object.defineProperty(C,"__esModule",{value:!0});C.allInputDevicesToAllInputs=C.gamepadMapToInputDevices=void 0;const He=B,As=S,Ss=H;function Ts(e){return(0,He.mapObject)(e,(t,n)=>({currentInputs:(0,As.gamepadToCurrentInputs)(n),deviceDetails:n,deviceName:n.id,deviceKey:n.index,deviceType:Ss.InputDeviceType.Gamepad}))}C.gamepadMapToInputDevices=Ts;function Ds(e){return(0,He.getObjectTypedValues)(e).map(r=>r.currentInputs).map(r=>(0,He.getObjectTypedValues)(r)).flat()}C.allInputDevicesToAllInputs=Ds;var On={};Object.defineProperty(On,"__esModule",{value:!0});var _={};Object.defineProperty(_,"__esModule",{value:!0});_.mouseBaseDevice=_.keyboardBaseDevice=_.isOfInputDeviceType=void 0;const Mn=A,jn=H;function Ns(e,t){return e.deviceType===t}_.isOfInputDeviceType=Ns;_.keyboardBaseDevice={deviceDetails:void 0,deviceKey:Mn.keyboardDeviceKeySymbol,deviceName:"keyboard",deviceType:jn.InputDeviceType.Keyboard};_.mouseBaseDevice={deviceDetails:void 0,deviceKey:Mn.mouseDeviceKeySymbol,deviceName:"mouse",deviceType:jn.InputDeviceType.Mouse};var st={},re={},U={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InputDeviceHandlerEventTypeEnum=void 0,function(t){t.NewDevicesAdded="new-devices-added",t.AllDevicesUpdated="all-devices-updated",t.CurrentInputsChanged="current-inputs-updated",t.DevicesRemoved="devices-removed"}(e.InputDeviceHandlerEventTypeEnum||(e.InputDeviceHandlerEventTypeEnum={}))})(U);var T={};function xs(){return e=>{var t;return t=class extends CustomEvent{constructor(r){super(e,r)}},t.type=e,t}}function Ps(e){var t;return t=class extends Event{constructor(r){super(e,r)}},t.type=e,t}class Is extends EventTarget{addEventListener(t,n,r){return super.addEventListener(t,n,r)}dispatchEvent(t){return super.dispatchEvent(t)}removeEventListener(t,n,r){return super.removeEventListener(t,n,r)}}const Ls=Object.freeze(Object.defineProperty({__proto__:null,defineTypedCustomEvent:xs,defineTypedEvent:Ps,TypedEventTarget:Is},Symbol.toStringTag,{value:"Module"})),Bn=mn(Ls);Object.defineProperty(T,"__esModule",{value:!0});T.defineTimedEvent=void 0;const ks=Bn;function Rs(){return(e,t)=>{var n;const r=(n=class extends(0,ks.defineTypedCustomEvent)()(e){static constructIfDataDataCheckPasses(s,...i){const o=r.dataCheckCallback(...i);if(o)return new r({detail:{timestamp:s,data:o}})}},n.dataCheckCallback=t,n);return r}}T.defineTimedEvent=Rs;Object.defineProperty(re,"__esModule",{value:!0});re.AllDevicesUpdatedEvent=void 0;const Os=U,Ms=T;function js(...[e,t]){return t}class Bs extends(0,Ms.defineTimedEvent)()(Os.InputDeviceHandlerEventTypeEnum.AllDevicesUpdated,js){}re.AllDevicesUpdatedEvent=Bs;var se={};Object.defineProperty(se,"__esModule",{value:!0});se.CurrentInputsChangedEvent=void 0;const Hs=B,Tt=C,Us=U,zs=T;function Ks(...[e,t]){const n=(0,Tt.allInputDevicesToAllInputs)(t),r=e?(0,Tt.allInputDevicesToAllInputs)(e):[];if(!(0,Hs.areJsonEqual)(r,n)){const s=n.filter(o=>!r.find(a=>{a.inputName,o.inputName})),i=r.filter(o=>!n.find(a=>{a.inputName,o.inputName}));return{newInputs:s,removedInputs:i,allCurrentInputs:n}}}class Vs extends(0,zs.defineTimedEvent)()(Us.InputDeviceHandlerEventTypeEnum.CurrentInputsChanged,Ks){}se.CurrentInputsChangedEvent=Vs;var ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.DevicesRemovedEvent=void 0;const Re=B,Gs=U,Fs=T;function Ws(...[e,t]){if(!e)return[];const n=(0,Re.getObjectTypedKeys)(e).filter(r=>!(0,Re.typedHasOwnProperty)(t,r));if(n.length)return n.map(r=>e[r]).filter(Re.isTruthy)}class Zs extends(0,Fs.defineTimedEvent)()(Gs.InputDeviceHandlerEventTypeEnum.DevicesRemoved,Ws){}ie.DevicesRemovedEvent=Zs;var oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.NewDevicesAddedEvent=void 0;const le=B,Js=U,qs=T;function Ys(...[e,t]){if(!e)return(0,le.getObjectTypedValues)(t);const n=(0,le.getObjectTypedKeys)(t).filter(r=>!(0,le.typedHasOwnProperty)(e,r));if(n.length)return n.map(r=>t[r]).filter(le.isTruthy)}class Qs extends(0,qs.defineTimedEvent)()(Js.InputDeviceHandlerEventTypeEnum.NewDevicesAdded,Ys){}oe.NewDevicesAddedEvent=Qs;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.inputHandlerEventMap=e.allEvents=void 0;const t=B,n=re,r=se,s=ie,i=oe;e.allEvents=[n.AllDevicesUpdatedEvent,i.NewDevicesAddedEvent,s.DevicesRemovedEvent,r.CurrentInputsChangedEvent];const o=e.allEvents.reduce((a,c)=>(a[c.type]=c,a),{});e.inputHandlerEventMap=(0,t.wrapNarrowTypeWithTypeCheck)()(o)})(st);var Se={};Object.defineProperty(Se,"__esModule",{value:!0});Se.InputDeviceHandler=void 0;const Xs=Bn,ei=C,ue=A,ti=S,de=_,Dt=H,ni=st;class ri extends Xs.TypedEventTarget{constructor(t={}){super(),this.currentKeyboardInputs={},this.currentMouseInputs={},this.gamepadDeadZoneSettings={},this.loopIsRunning=!1,this.currentLoopIndex=-1,t.skipLoopStart||this.startPollingLoop(),t.gamepadDeadZoneSettings&&this.updateGamepadDeadZoneSettings(t.gamepadDeadZoneSettings),this.attachWindowListeners()}attachWindowListeners(){window.addEventListener("keydown",t=>{const n=t.key;this.currentKeyboardInputs.hasOwnProperty(n)||(this.currentKeyboardInputs[n]={deviceType:Dt.InputDeviceType.Keyboard,details:{keyboardEvent:t},deviceKey:ue.keyboardDeviceKeySymbol,deviceName:de.keyboardBaseDevice.deviceName,inputName:n,inputValue:1})}),window.addEventListener("keyup",t=>{delete this.currentKeyboardInputs[t.key]}),window.addEventListener("mousedown",t=>{const n=t.button;this.currentMouseInputs.hasOwnProperty(n)||(this.currentMouseInputs[n]={deviceType:Dt.InputDeviceType.Mouse,details:{mouseEvent:t},deviceName:de.mouseBaseDevice.deviceName,deviceKey:ue.mouseDeviceKeySymbol,inputName:n,inputValue:1})}),window.addEventListener("mouseup",t=>{delete this.currentMouseInputs[t.button]})}runPollingLoop(t,n){this.loopIsRunning&&this.currentLoopIndex===t&&(this.updateInputDevices(n),requestAnimationFrame(r=>{this.runPollingLoop(t,r)}))}fireEvents(t,n){ni.allEvents.forEach(r=>{const s=r.constructIfDataDataCheckPasses(t,this.lastReadInputDevices,n);s&&this.dispatchEvent(s)})}readAllInputDevices(){const t=(0,ti.readCurrentGamepads)(this.gamepadDeadZoneSettings),n=(0,ei.gamepadMapToInputDevices)(t);return{[ue.keyboardDeviceKeySymbol]:{...de.keyboardBaseDevice,currentInputs:{...this.currentKeyboardInputs}},[ue.mouseDeviceKeySymbol]:{...de.mouseBaseDevice,currentInputs:{...this.currentMouseInputs}},...n}}startPollingLoop(){this.loopIsRunning=!0,this.currentLoopIndex++,requestAnimationFrame(t=>{this.runPollingLoop(this.currentLoopIndex,t)})}pausePollingLoop(){this.loopIsRunning=!1}getLastPollResults(){return this.lastReadInputDevices}updateInputDevices(t=Date.now()){const n=this.readAllInputDevices();return this.fireEvents(t,n),this.lastReadInputDevices=n,n}updateGamepadDeadZoneSettings(t){this.gamepadDeadZoneSettings=t}}Se.InputDeviceHandler=ri;(function(e){var t=ce&&ce.__createBinding||(Object.create?function(r,s,i,o){o===void 0&&(o=i);var a=Object.getOwnPropertyDescriptor(s,i);(!a||("get"in a?!s.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return s[i]}}),Object.defineProperty(r,o,a)}:function(r,s,i,o){o===void 0&&(o=i),r[o]=s[i]}),n=ce&&ce.__exportStar||function(r,s){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(s,i)&&t(s,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(gn,e),n(C,e),n(A,e),n(On,e),n(P,e),n(ne,e),n(S,e),n(I,e),n(_,e),n(H,e),n(rt,e),n(st,e),n(U,e),n(T,e),n(re,e),n(se,e),n(ie,e),n(oe,e),n(Se,e)})(w);var X=(e=>(e.Game="game",e.AssignControls="assign-controls",e))(X||{});class si{constructor(){this.shouldRunCallbacks=!0,this.loopCallbacks=new Map}addLoopCallback(t,n){const r=be(),s={lastTimeFired:Date.now(),timeout:n,callback:t};return this.loopCallbacks.set(r,s),r}removeLoopCallback(t){return this.loopCallbacks.delete(t)}addLoopTrigger(t){return t.addLoopCallback((n,r)=>{this.fireLoopCallbacks(r,n)})}fireLoopCallbacks(t,n){if(!this.loopCallbacks.size||!this.shouldRunCallbacks)return;const r=this.generateCallbackInput(t,n);this.loopCallbacks.forEach(s=>{if(s.timeout){const i=t-s.lastTimeFired;if(i>=s.timeout){const o=i-s.timeout;s.lastTimeFired=t-o,s.callback(r,t)}}else s.callback(r,t)})}}class ii extends si{constructor(){super(),this.startGameLoop()}addLoopTrigger(){throw new Error(`${this.constructor.name} handles its own triggers: don't call addLoopTrigger to it.`)}runGameLoop(t){this.fireLoopCallbacks(t,void 0),requestAnimationFrame(n=>{this.runGameLoop(n)})}generateCallbackInput(){}startGameLoop(){requestAnimationFrame(t=>{this.runGameLoop(t)})}}const ve=0;function oi(e){if(!et(e)||!Ae(e,"settingsVersion"))return;if(typeof e.settingsVersion!="number"||e.settingsVersion>ve){console.error(`Invalid version number from settings: ${e.settingsVersion}. Latest possible version is ${ve}`);return}let t=e.settingsVersion;for(;t<ve;){const n=ci[t];if(!n){console.error(`Failed to get settings updater for version ${t}`);return}if(e=n(e),!e)return;t++}if(ai(e))return e}function ai(e){return!!(et(e)&&An(e,["gamepadSettings","bindings","settingsVersion"]))}const ci=kn()({}),li={deadZones:{}},Nt={gamepadSettings:li,bindings:{},settingsVersion:ve},Hn="forward-game-settings";function ui(){const e=window.localStorage.getItem(Hn);if(!!e)try{const t=JSON.parse(e);return console.log({parsedSettings:t}),oi(t)}catch(t){console.error(`Failed to load game settings: ${t}`);return}}function di(){const e=ui();return e||(Un(Nt),Nt)}function Un(e){try{return window.localStorage.setItem(Hn,JSON.stringify(e)),!0}catch(t){return console.error(t),!1}}class ae extends Error{constructor(t){super(t),this.name="SpaRouterError"}}class xt extends ae{constructor(t){super(t),this.name="WindowEventConsolidationError"}}const Te="locationchange";let Pt=!1;const pi=window.history.pushState;function It(...e){const t=pi.apply(window.history,e);return window.dispatchEvent(new Event(Te)),t}const hi=window.history.replaceState;function Lt(...e){const t=hi.apply(window.history,e);return window.dispatchEvent(new Event(Te)),t}function fi(){if(!Pt){if(window.history.pushState===It)throw new xt("The consolidation module thinks that window events have not been consolidated yet but window.history.pushState has already been overridden. Does this module have two copies in your repo?");if(window.history.replaceState===Lt)throw new xt("The consolidation module thinks that window events have not been consolidated yet but window.history.replaceState has already been overridden. Does this module have two copies in your repo?");Pt=!0,window.history.pushState=It,window.history.replaceState=Lt,window.addEventListener("popstate",()=>{window.dispatchEvent(new Event(Te))})}}function vi(e){return Array.from(e.entries()).reduce((t,n)=>(t[n[0]]=n[1],t),{})}function mi(e){const t=Object.entries(e).reduce((n,r)=>{const s=`${r[0]}=${r[1]}`;return`${n}&${s}`},"");return new URLSearchParams(t)}function gi(e){const n=(e?window.location.pathname.replace(e,""):window.location.pathname).split("/").filter(o=>!!o),s=window.location.search?vi(new URLSearchParams(window.location.search)):void 0,i=window.location.hash||void 0;return{paths:n,search:s,hash:i}}class yi extends ae{constructor(t){super(t),this.name="SanitizationDepthMaxed"}}function W(e,t){if(e.paths.join(" ")!==t.paths.join(" "))return!1;if(typeof e.search=="object"&&typeof t.search=="object"){const n=Object.entries(e.search).join(" "),r=Object.entries(t.search).join(" ");if(n!==r)return!1}else if(e.search!==t.search)return!1;return e.hash===t.hash}const kt=6;function Rt(e,t){const n=e.getCurrentRawRoutes();if(e.sanitizationDepth>kt)throw new yi(`Route sanitization depth has exceed the max of ${kt} with ${JSON.stringify(n)}`);const r=e.sanitizeFullRoute(n);if(W(r,n))e.sanitizationDepth=0,t?t(r):e.listeners.forEach(s=>{s(r)});else return e.sanitizationDepth++,e.setRoutes(r,!0)}class Oe extends ae{constructor(t){super(t),this.name="InvalidRouterInitParamsError"}}function wi(e){if("routeBase"in e&&typeof e.routeBase!="string"&&e.routeBase!=null)throw new Oe(`Invalid type for router init params "routeBase" property. Expected string or undefined but got "${e.routeBase}" with type "${typeof e.routeBase}".`);if("routeSanitizer"in e&&typeof e.routeSanitizer!="function"&&e.routeSanitizer!=null)throw new Oe(`Invalid type for router init params "routeSanitizer" property. Expected a function or undefined but got "${e.routeSanitizer}" with type "${typeof e.routeSanitizer}".`);if("maxListenerCount"in e&&(typeof e.maxListenerCount!="number"||isNaN(e.maxListenerCount))&&e.maxListenerCount!=null)throw new Oe(`Invalid type for router init params "maxListenerCount" property. Expected a number or undefined but got "${e.maxListenerCount}" with type "${typeof e.maxListenerCount}".`)}function $i(e,t,n,r=!1){const s=zn(e,t,n);r?window.history.replaceState(void 0,"",s):window.history.pushState(void 0,"",s)}function zn(e,t,n=""){var r;if(!n&&t!=null)throw new ae("Route base regexp was defined but routeBase string was not provided.");const s=bi(t)?`/${n}`:"",i=e.search?mi(e.search).toString():"",o=i?`?${i}`:"",a=!((r=e.hash)===null||r===void 0)&&r.startsWith("#")?"":"#",c=e.hash?`${a}${e.hash}`:"";return`${s}/${e.paths.join("/")}${o}${c}`}function bi(e){return!!(e&&window.location.pathname.match(e))}function _i(e={}){var t;wi(e),fi();const n=(t=e.routeBase)===null||t===void 0?void 0:t.replace(/\/+$/,""),r=n?new RegExp(`^\\/${e.routeBase}`):void 0;let s=!1;const i={listeners:new Set,initParams:e,sanitizeFullRoute:o=>{const a={hash:void 0,search:void 0,...o};return e.routeSanitizer?e.routeSanitizer(a):a},setRoutes:(o,a=!1,c=!1)=>{const l=i.getCurrentRawRoutes(),p={...l,...o},d=i.sanitizeFullRoute(p);if(!(!c&&W(l,d)))return $i(d,r,n,a)},createRoutesUrl:o=>zn(o,r,n),getCurrentRawRoutes:()=>gi(r),addRouteListener:(o,a)=>{if(e.maxListenerCount&&i.listeners.size>=e.maxListenerCount)throw new ae(`Tried to exceed route listener max of ${e.maxListenerCount}.`);return i.listeners.add(a),s||(window.addEventListener(Te,()=>Rt(i)),s=!0),o&&Rt(i,a),a},hasRouteListener:o=>i.listeners.has(o),removeRouteListener:o=>i.listeners.delete(o),sanitizationDepth:0};return i}const Ue={paths:[X.AssignControls],search:void 0,hash:void 0};function Ei(){return _i({maxListenerCount:1,routeBase:"forward-game",routeSanitizer:e=>{const t=e.paths[0];return Xe(t,X)?{...Ue,paths:[t]}:Ue}})}Ce()("change-route-event");const Kn=Ce()("update-game-settings");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ot=(e,t,n)=>{const r=new Map;for(let s=t;s<=n;s++)r.set(e[s],s);return r},Vn=We(class extends Ze{constructor(e){if(super(e),e.type!==sn.CHILD)throw Error("repeat() can only be used in text expressions")}ht(e,t,n){let r;n===void 0?n=t:t!==void 0&&(r=t);const s=[],i=[];let o=0;for(const a of e)s[o]=r?r(a,o):o,i[o]=n(a,o),o++;return{values:i,keys:s}}render(e,t,n){return this.ht(e,t,n).values}update(e,[t,n,r]){var s;const i=Er(e),{values:o,keys:a}=this.ht(t,n,r);if(!Array.isArray(i))return this.ut=a,o;const c=(s=this.ut)!==null&&s!==void 0?s:this.ut=[],l=[];let p,d,u=0,h=i.length-1,f=0,v=o.length-1;for(;u<=h&&f<=v;)if(i[u]===null)u++;else if(i[h]===null)h--;else if(c[u]===a[f])l[f]=N(i[u],o[f]),u++,f++;else if(c[h]===a[v])l[v]=N(i[h],o[v]),h--,v--;else if(c[u]===a[v])l[v]=N(i[u],o[v]),V(e,l[v+1],i[u]),u++,v--;else if(c[h]===a[f])l[f]=N(i[h],o[f]),V(e,i[u],i[h]),h--,f++;else if(p===void 0&&(p=Ot(a,f,v),d=Ot(c,u,h)),p.has(c[u]))if(p.has(c[h])){const g=d.get(a[f]),z=g!==void 0?i[g]:null;if(z===null){const it=V(e,i[u]);N(it,o[f]),l[f]=it}else l[f]=N(z,o[f]),V(e,i[u],z),i[g]=null;f++}else ke(i[h]),h--;else ke(i[u]),u++;for(;f<=v;){const g=V(e,l[v+1]);N(g,o[f]),l[f++]=g}for(;u<=h;){const g=i[u++];g!==null&&ke(g)}return this.ut=a,_r(e,l),E}});var y=(e=>(e.Up="up",e.Down="down",e.Left="left",e.Right="right",e.Pause="pause",e))(y||{});const Gn={up:{direction:1,inputName:""},down:{direction:1,inputName:""},left:{direction:1,inputName:""},right:{direction:1,inputName:""},pause:{direction:1,inputName:""}};function Ci(e){return e?$e(e).every(t=>t.inputName!==""):!1}const Ai=te`
    .individual-binding-wrapper {
        display: flex;
        flex-direction: column;
        padding: 8px;
        border: 2px solid #ccc;
        width: 75px;
        height: 40px;
        align-items: center;
        border-radius: 4px;
        gap: 4px;
        cursor: pointer;
    }

    .control-name {
        text-decoration: underline;
    }

    .individual-binding-wrapper.selected {
        border-color: dodgerblue;
        opacity: 1;
    }

    .binding-row {
        display: flex;
        justify-content: space-between;
    }

    .binding-row.single {
        justify-content: center;
    }

    .bindings-wrapper {
        width: 300px;
        max-width: 100%;
        display: flex;
        flex-direction: column;
        gap: 8px;
        user-select: none;
        -webkit-user-select: none;
    }
`;function Si({currentDevice:e,allBindings:t,currentlySelected:n,selectedCallback:r}){var o,a;const s=(a=(o=t[e.deviceName])==null?void 0:o.bindings)!=null?a:Gn,i={currentlySelected:n,selectedCallback:r};return $`
        <div class="bindings-wrapper">
            <div class="binding-row single">
                ${G({...i,control:y.Up,binding:s[y.Up]})}
            </div>
            <div class="binding-row">
                ${G({...i,control:y.Left,binding:s[y.Left]})}
                ${G({...i,control:y.Right,binding:s[y.Right]})}
            </div>
            <div class="binding-row single">
                ${G({...i,control:y.Down,binding:s[y.Down]})}
            </div>
            <div class="binding-row single">
                ${G({...i,control:y.Pause,binding:s[y.Pause]})}
            </div>
        </div>
    `}function G({control:e,binding:t,currentlySelected:n,selectedCallback:r}){const s=t.inputName===""?"N/A":t.inputName;return $`
        <div
            class="individual-binding-wrapper ${n?"blocked":""} ${n===e?"selected":""}"
            ${R("click",()=>{r(e)})}
        >
            <span class="control-name">${e}</span>
            <span class="bound-name">${s}</span>
        </div>
    `}function Ti(e){switch(e.deviceType){case w.InputDeviceType.Gamepad:return"\u{1F3AE}";case w.InputDeviceType.Keyboard:return"\u2328\uFE0F";case w.InputDeviceType.Mouse:return"\u{1F5B1}"}}const Mt=["red","orange","gold","yellow","lime","green","cyan","blue","purple","magenta"];function Fn({inputDevice:e,animations:t,selectedCallback:n,selectedKey:r,isTopLevel:s=!1}){const i=Ti(e),o=s?Mt[Math.floor(Math.random()*Mt.length)]:"",a=s?"animated-icon":r===e.deviceKey?"selected":"",c=o?`--glow-color: ${o};`:"";return $`
        <div
            class="input-device-selector ${a}"
            style=${c}
            ${R("click",n)}
        >
            <span class="device-icon">${i}</span>
            <span class="device-name">${e.deviceName}</span>
            ${Vn(t,p=>p.timestamp,()=>Fn({inputDevice:e,animations:[],selectedCallback:n,selectedKey:void 0,isTopLevel:!0}))}
        </div>
    `}const Wn=700;function Di(e){const t=Date.now();return Sn(e,(n,r)=>r.filter(s=>s.timestamp>t-Wn))}const pe=Fe()({tagName:"vir-assign-controls",events:{assignmentSuccessful:tn()},styles:te`
        :host {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 32px;
        }

        .device-selector-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            padding: 16px;
        }

        .device-icon {
            font-size: 3em;
        }

        .input-device-selector {
            max-width: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            user-select: none;
            -webkit-user-select: none;
            position: relative;
            padding: 8px 16px;
            background-color: white;
            box-sizing: border-box;
            border: 2px solid #ccc;
            overflow: hidden;
            border-radius: 8px;
            cursor: pointer;
        }

        .input-device-selector span {
            text-overflow: ellipsis;
            overflow: hidden;
            max-width: 100%;
            white-space: nowrap;
        }

        .input-device-selector .device-name {
            font-size: 0.9em;
        }

        .device-icon {
            user-select: inherit;
            -webkit-user-select: inherit;
        }

        .input-device-selector.selected {
            border-color: dodgerblue;
            cursor: auto;
        }

        .animated-icon {
            border: none;
            position: absolute;
            background-color: inherit;
            padding: inherit;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            box-sizing: inherit;
            border-radius: inherit;
            pointer-events: none;
        }

        .animated-icon .device-icon {
            animation: glow ${Wn/2}ms;
        }

        @keyframes glow {
            0% {
                filter: drop-shadow(0 0 6px var(--glow-color, red));
            }
            100% {
                filter: drop-shadow(0 0 0 var(--glow-color, red));
            }
        }

        .blocked {
            opacity: 0.3;
            pointer-events: none;
        }

        .continue-button {
            margin-top: 24px;
            padding: 8px;
            font: inherit;
            background-color: skyblue;
            border: 1px solid grey;
            border-radius: 4px;
            cursor: pointer;
        }

        .continue-button:hover {
            background-color: lightblue;
        }

        ${Ai};
    `,stateInit:{selectedDeviceKey:0,currentInputDevices:{},currentInputDeviceAnimations:{},selectedBindingControl:void 0},initCallback:({inputs:e,state:t,updateState:n,genericDispatch:r})=>{e.inputHandler.addEventListener(w.InputDeviceHandlerEventTypeEnum.NewDevicesAdded,s=>{const i=s.detail.data.reduce((p,d)=>(p[d.deviceKey]={deviceKey:d.deviceKey,deviceName:d.deviceName,deviceType:d.deviceType},p),{}),o={...t.currentInputDevices,...i},a=$e(i)[0],c=a?{selectedDeviceKey:a.deviceKey}:{},l=Ae(o,t.selectedDeviceKey)?{}:{selectedDeviceKey:w.keyboardDeviceKeySymbol};n({currentInputDevices:o,...l,...c})}),e.inputHandler.addEventListener(w.InputDeviceHandlerEventTypeEnum.DevicesRemoved,s=>{const i={...t.currentInputDevices};s.detail.data.forEach(o=>{delete i[o.deviceKey]}),n({currentInputDevices:i})}),e.inputHandler.addEventListener(w.InputDeviceHandlerEventTypeEnum.CurrentInputsChanged,s=>{var p,d;const i=s.detail.data.newInputs,o=!!t.selectedBindingControl;let a=!1;if(o){const u=i.filter(h=>h.deviceKey===t.selectedDeviceKey).filter(h=>Math.abs(h.inputValue)>.7)[0];if(u){u.inputName;const h={...(d=(p=e.gameSettings.bindings[u.deviceName])==null?void 0:p.bindings)!=null?d:Gn,[t.selectedBindingControl]:{inputName:u.inputName,direction:u.inputValue>0?1:-1}};r(new Kn({...e.gameSettings,bindings:{...e.gameSettings.bindings,[u.deviceName]:{deviceName:u.deviceName,bindings:h}}})),a=!0}}const c=i.map(u=>({deviceKey:u.deviceKey,deviceName:u.deviceName,timestamp:Date.now()})),l=Di(t.currentInputDeviceAnimations);c.forEach(u=>{l[u.deviceKey]||(l[u.deviceKey]=[]),l[u.deviceKey].push(u)}),n({currentInputDeviceAnimations:l,...a?{selectedBindingControl:void 0}:{}})})},renderCallback:({state:e,updateState:t,inputs:n,dispatch:r,events:s})=>{var o,a;const i=(o=e.currentInputDevices[e.selectedDeviceKey])!=null?o:e.currentInputDevices[w.keyboardDeviceKeySymbol];return i?$`
            <h2>Configure Inputs</h2>
            To connect a controller, push buttons on it.
            <div class="device-selector-wrapper ${e.selectedBindingControl?"blocked":""}">
                ${Vn($e(e.currentInputDevices).filter(c=>c.deviceKey!==w.mouseDeviceKeySymbol).sort((c,l)=>typeof c.deviceKey=="symbol"?-1:typeof l.deviceKey=="symbol"?1:c.deviceKey-l.deviceKey),c=>c.deviceKey,c=>{const l=e.currentInputDeviceAnimations[c.deviceKey];return Fn({inputDevice:c,animations:l!=null?l:[],selectedCallback:()=>{t({selectedDeviceKey:c.deviceKey})},selectedKey:e.selectedDeviceKey,isTopLevel:!1})})}
            </div>
            <div>
                ${Si({currentDevice:i,allBindings:n.gameSettings.bindings,currentlySelected:e.selectedBindingControl,selectedCallback:c=>{t({selectedBindingControl:c})}})}
            </div>
            <div>
                <button
                    class="continue-button"
                    ?disabled=${!Ci((a=n.gameSettings.bindings[i.deviceName])==null?void 0:a.bindings)}
                    ${R("click",()=>{r(new s.assignmentSuccessful)})}
                >
                    Continue
                </button>
            </div>
        `:$``}}),jt=Fe()({tagName:"vir-game",events:{},styles:te``,stateInit:{position:{x:0,y:0,paused:!1}},initCallback:({inputs:e,state:t,updateState:n,genericDispatch:r})=>{},renderCallback:({state:e,updateState:t,inputs:n,dispatch:r,events:s})=>$`
            Game Will Be Here
        `}),he=Fe()({stateInit:{router:void 0},styles:te`
        :host {
            display: none;
        }
    `,tagName:"vir-forward-game-app-routing",events:{routeChange:tn()},initCallback:({updateState:e,dispatch:t,events:n})=>{const r=Ei();e({router:r}),r.addRouteListener(!0,s=>{t(new n.routeChange(s))})},renderCallback:({inputs:e,state:t})=>{W(e.currentRoute,t.router.getCurrentRawRoutes())||t.router.setRoutes(e.currentRoute);const n=e.currentRoute;return(!W(n,e.currentRoute)||!W(n,t.router.getCurrentRawRoutes()))&&t.router.setRoutes(n),$``}});const Ni=new ii,Bt=di();rn({tagName:"vir-forward-game-app",stateInit:{currentRoute:Ue,gameLoop:Ni,inputHandler:new w.InputDeviceHandler({gamepadDeadZoneSettings:Bt.gamepadSettings.deadZones}),gameSettings:Bt},styles:te`
        :host,
        main {
            width: 100%;
            height: 100%;
        }
        main {
            display: flex;
            flex-direction: column;
        }
        main > * {
            flex-grow: 1;
        }
    `,renderCallback:({state:e,updateState:t})=>$`
            <main
                ${R(Kn,n=>{Un(n.detail),t({gameSettings:n.detail})})}
            >
                <${he}
                    ${_t(he,{currentRoute:e.currentRoute})}
                    ${R(he.events.routeChange,n=>{t({currentRoute:n.detail})})}
                ></${he}>
                ${e.currentRoute.paths[0]===X.AssignControls?$`
                            <${pe}
                                ${_t(pe,{inputHandler:e.inputHandler,gameSettings:e.gameSettings})}
                                ${R(pe.events.assignmentSuccessful,()=>{t({currentRoute:{...e.currentRoute,paths:[X.Game]}})})}
                            ></${pe}>`:$`
                              <${jt}></${jt}>
                          `}
            </main>
        `});
